version: '3.7'

services:
    nginx:
        image: web.docker-registry.gewis.nl/gewisweb_nginx:latest
        depends_on:
            - web
        volumes:
            - gewisweb_public:/public:ro
            - gewisweb_logs:/etc/nginx/logs:rw
        networks:
            - gewisweb_network
        ports:
            - "9200:80"
        restart: unless-stopped
    web:
        image: web.docker-registry.gewis.nl/gewisweb_web:latest
        volumes:
            - gewisweb_data:/data:rw
            - gewisweb_public:/public:rw
        networks:
            - gewisweb_network
        restart: unless-stopped

volumes:
    gewisweb_data:
    gewisweb_public:
    gewisweb_logs:

networks:
    gewisweb_network:
        name: gewisweb
