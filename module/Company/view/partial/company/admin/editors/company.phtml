<?php

declare(strict_types=1);

use Application\View\HelperTrait;
use Company\Form\Company as CompanyForm;
use Laminas\View\Renderer\PhpRenderer;

/**
 * @var PhpRenderer|HelperTrait $this
 * @var CompanyForm $form
 */
?>
<div class="row">
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h2><?= $this->translate('Slug') ?></h2>
                <p>
                    <?= $this->translate(
                        'Specify the permanent link for this company, it should be unique across all companies.'
                    ) ?>
                </p>
            </div>
            <div class="col-md-12">
                <?php
                $name = $form->get('name')
                    ->setAttribute('class', 'form-control')
                    ->setAttribute('id', 'name');
                ?>
                <div class="form-group <?= $this->bootstrapElementError($name) ?>">
                    <label for="<?= $name->getAttribute('id') ?>" class="control-label label-required">
                        <?= $name->getLabel() ?>
                    </label>
                    <?= $this->formText($name) ?>
                    <?= $this->formElementErrors($name) ?>
                </div>
            </div>
            <div class="col-md-12">
                <?php
                $slugName = $form->get('slugName')
                    ->setAttribute('class', 'form-control')
                    ->setAttribute('id', 'slug-name');
                ?>
                <div class="form-group <?= $this->bootstrapElementError($slugName) ?>">
                    <label for="<?= $slugName->getAttribute('id') ?>" class="control-label label-required">
                        <?= $slugName->getLabel() ?>
                    </label>
                    <?= $this->formText($slugName) ?>
                    <?= $this->formElementErrors($slugName) ?>
                </div>
            </div>
            <div class="col-md-12">
                <?php
                $logo = $form->get('logo')
                    ->setAttribute('class', 'form-control')
                    ->setAttribute('id', 'logo');
                ?>
                <div class="form-group <?= $this->bootstrapElementError($logo) ?>">
                    <label for="<?= $logo->getAttribute('id') ?>"
                           class="control-label <?= $companyLogo ?? 'label-required' ?>">
                        <?= $logo->getLabel() ?>
                    </label>
                    <?= $this->formFile($logo) ?>
                    <?= $this->formElementErrors($logo) ?>
                    <?php
                    if (isset($companyLogo)):
                    ?>
                        <a href="<?= $this->fileUrl($companyLogo); ?>" target="_blank">
                            <?= $this->translate('View current logo'); ?>
                        </a>
                    <?php endif; ?>
                </div>
            </div>
            <div class="col-md-12">
                <?php
                $published = $form->get('published')
                    ->setAttribute('class', 'form-control')
                    ->setAttribute('id', 'published');
                ?>
                <div class="form-group <?= $this->bootstrapElementError($published) ?>">
                    <label for="<?= $published->getAttribute('id') ?>" class="control-label label-required">
                        <?= $published->getLabel() ?>
                    </label>
                    <?= $this->formCheckbox($published) ?>
                    <?= $this->formElementErrors($published) ?>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h2><?= $this->translate('Representative Information') ?></h2>
                <p><?= $this->translate('Enter information about the representative of this company.') ?></p>
            </div>
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-12">
                        <?php
                        $representativeName = $form->get('representativeName')
                            ->setAttribute('class', 'form-control')
                            ->setAttribute('id', 'representative-name');
                        ?>
                        <div class="form-group <?= $this->bootstrapElementError($representativeName) ?>">
                            <label for="<?= $representativeName->getAttribute('id') ?>" class="control-label  label-required">
                                <?= $representativeName->getLabel() ?>
                            </label>
                            <?= $this->formText($representativeName) ?>
                            <?= $this->formElementErrors($representativeName) ?>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <?php
                        $representativeEmail = $form->get('representativeEmail')
                            ->setAttribute('class', 'form-control')
                            ->setAttribute('id', 'representative-email');
                        ?>
                        <div class="form-group <?= $this->bootstrapElementError($representativeEmail) ?>">
                            <label for="<?= $representativeEmail->getAttribute('id') ?>" class="control-label label-required">
                                <?= $representativeEmail->getLabel() ?>
                            </label>
                            <?= $this->formText($representativeEmail) ?>
                            <?= $this->formElementErrors($representativeEmail) ?>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h2><?= $this->translate('Contact Information') ?></h2>
                <p><?= $this->translate('Enter how someone can contact this company and who is responsible for this company.') ?></p>
            </div>
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-6">
                        <?php
                        $contactName = $form->get('contactName')
                            ->setAttribute('class', 'form-control')
                            ->setAttribute('id', 'contact-name');
                        ?>
                        <div class="form-group <?= $this->bootstrapElementError($contactName) ?>">
                            <label for="<?= $contactName->getAttribute('id') ?>" class="control-label">
                                <?= $contactName->getLabel() ?>
                            </label>
                            <?= $this->formText($contactName) ?>
                            <?= $this->formElementErrors($contactName) ?>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <?php
                        $contactEmail = $form->get('contactEmail')
                            ->setAttribute('class', 'form-control')
                            ->setAttribute('id', 'contact-email');
                        ?>
                        <div class="form-group <?= $this->bootstrapElementError($contactEmail) ?>">
                            <label for="<?= $contactEmail->getAttribute('id') ?>" class="control-label">
                                <?= $contactEmail->getLabel() ?>
                            </label>
                            <?= $this->formText($contactEmail) ?>
                            <?= $this->formElementErrors($contactEmail) ?>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <?php
                        $contactPhone = $form->get('contactPhone')
                            ->setAttribute('class', 'form-control')
                            ->setAttribute('id', 'contact-phone');
                        ?>
                        <div class="form-group <?= $this->bootstrapElementError($contactPhone) ?>">
                            <label for="<?= $contactPhone->getAttribute('id') ?>" class="control-label">
                                <?= $contactPhone->getLabel() ?>
                            </label>
                            <?= $this->formText($contactPhone) ?>
                            <?= $this->formElementErrors($contactPhone) ?>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <?php
                        $contactAddress = $form->get('contactAddress')
                            ->setAttribute('class', 'form-control')
                            ->setAttribute('id', 'contact-address');
                        ?>
                        <div class="form-group <?= $this->bootstrapElementError($contactAddress) ?>">
                            <label for="<?= $contactAddress->getAttribute('id') ?>" class="control-label">
                                <?= $contactAddress->getLabel() ?>
                            </label>
                            <?= $this->formTextarea($contactAddress) ?>
                            <?= $this->formElementErrors($contactAddress) ?>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <h2><?= $this->translate('Information') ?></h2>
        <p><?= $this->translate('What is this company about? Fill in the blanks below, please note that at least one language must be used.') ?></p>
    </div>
    <div class="col-md-6">
        <?php
        $checkboxDutch = $form->get('language_dutch')
            ->setAttribute('id', 'dutch-check')
            ->setAttribute('class', 'language-control');
        ?>
        <div class="form-group <?= $this->bootstrapElementError($checkboxDutch) ?>">
            <label for="<?= $checkboxDutch->getAttribute('id') ?>" class="control-label"
                   title="<?= $checkboxDutch->getLabel() ?>">
                <?= $this->formCheckbox($checkboxDutch) ?>
                <span class="flag-icon flag-icon-nl"></span>
                <?= $this->translate('Dutch') ?>
            </label>
            <?= $this->formElementErrors($checkboxDutch) ?>
        </div>
        <hr>
        <?php
        // A slogan is not required, to prevent the field from being marked required, add `not-required` to its `id`.
        $slogan = $form->get('slogan')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-dutch')
            ->setAttribute('id', 'slogan-nl-not-required');
        $slogan->setValue($this->localisedTextElement($slogan));
        ?>
        <div class="form-group <?= $this->bootstrapElementError($slogan) ?>">
            <label for="<?= $slogan->getAttribute('id') ?>" class="control-label">
                <?= $slogan->getLabel() ?>
            </label>
            <?= $this->formText($slogan) ?>
            <?= $this->formElementErrors($slogan) ?>
        </div>
        <?php
        $website = $form->get('website')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-dutch')
            ->setAttribute('id', 'website-nl');
        $website->setValue($this->localisedTextElement($website));
        ?>
        <div class="form-group <?= $this->bootstrapElementError($website) ?>">
            <label for="<?= $website->getAttribute('id') ?>" class="control-label">
                <?= $website->getLabel() ?>
            </label>
            <?= $this->formUrl($website) ?>
            <?= $this->formElementErrors($website) ?>
        </div>
        <?php
        $description = $form->get('description')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-dutch')
            ->setAttribute('style', 'width:100%; height:10em; resize:none')
            ->setAttribute('id', 'description-nl');
        $description->setValue($this->localisedTextElement($description));
        ?>
        <div class="form-group <?= $this->bootstrapElementError($description) ?>">
            <label for="<?= $description->getAttribute('id') ?>" class="control-label">
                <?= $description->getLabel() ?>
            </label>
            <?= $this->formTextarea($description) ?>
            <?= $this->formElementErrors($description) ?>
        </div>
    </div>
    <div class="col-md-6">
        <?php
        $checkboxEnglish = $form->get('language_english')
            ->setAttribute('id', 'english-check')
            ->setAttribute('class', 'language-control');
        ?>
        <div class="form-group <?= $this->bootstrapElementError($checkboxEnglish) ?>">
            <label for="<?= $checkboxEnglish->getAttribute('id') ?>" class="control-label"
                   title="<?= $checkboxEnglish->getLabel() ?>">
                <?= $this->formCheckbox($checkboxEnglish) ?>
                <span class="flag-icon flag-icon-en"></span>
                <?= $this->translate('English') ?>
            </label>
            <?= $this->formElementErrors($checkboxEnglish) ?>
        </div>
        <hr>
        <?php
        // A slogan is not required, to prevent the field from being marked required, add `not-required` to its `id`.
        $sloganEn = $form->get('sloganEn')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-english')
            ->setAttribute('id', 'slogan-en-not-required');
        $sloganEn->setValue($this->localisedTextElement($sloganEn));
        ?>
        <div class="form-group <?= $this->bootstrapElementError($sloganEn) ?>">
            <label for="<?= $sloganEn->getAttribute('id') ?>" class="control-label">
                <?= $sloganEn->getLabel() ?>
            </label>
            <?= $this->formText($sloganEn) ?>
            <?= $this->formElementErrors($sloganEn) ?>
        </div>
        <?php
        $websiteEn = $form->get('websiteEn')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-english')
            ->setAttribute('id', 'website-en');
        $websiteEn->setValue($this->localisedTextElement($websiteEn));
        ?>
        <div class="form-group <?= $this->bootstrapElementError($websiteEn) ?>">
            <label for="<?= $websiteEn->getAttribute('id') ?>" class="control-label">
                <?= $websiteEn->getLabel() ?>
            </label>
            <?= $this->formUrl($websiteEn) ?>
            <?= $this->formElementErrors($websiteEn) ?>
        </div>
        <?php
        $descriptionEn = $form->get('descriptionEn')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-english')
            ->setAttribute('style', 'width:100%; height:10em; resize:none')
            ->setAttribute('id', 'description-en');
        $descriptionEn->setValue($this->localisedTextElement($descriptionEn));
        ?>
        <div class="form-group <?= $this->bootstrapElementError($descriptionEn) ?>">
            <label for="<?= $descriptionEn->getAttribute('id') ?>" class="control-label">
                <?= $descriptionEn->getLabel() ?>
            </label>
            <?= $this->formTextarea($descriptionEn) ?>
            <?= $this->formElementErrors($descriptionEn) ?>
        </div>
    </div>
</div>
<script nonce="<?= NONCE_REPLACEMENT_STRING ?>">
    document.querySelectorAll('.language-control').forEach(checkbox => {
        checkbox.addEventListener('click', () => {
            Company.Admin.updateForm();
        });
    });
</script>
