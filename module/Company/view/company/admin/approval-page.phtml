<?php

//echo var_dump($pendingApprovals[0]->getProfileApproval()->getCompany()->getName());

?>

<div class="row">
    <div class="col-md-12">
        <table class="table table-striped ">
            <thead>
            <tr>
                <th>
                    <?= $this->translate('Company name') ?>
                </th>
                <th>
                    <?= $this->translate('Approval type') ?>

                </th>
                <th>
                    <?= $this->translate('Approval status') ?>
                </th>
                <th>
                    <?= $this->translate('Actions') ?>
                </th>
            </tr>
            </thead>
            <tbody class="company-list">
                <?php foreach ($pendingApprovals as &$pendingApproval): ?>
                <tr>
                    <th>
                        <?= $pendingApproval->getCompany()->getName() ?>
                    </th>
                    <th>
                        <?= $pendingApproval->getType() ?>
                    </th>
                    <th>
                        <?php
                        if($pendingApproval->getStatus()){
                            echo $this->translate("Rejected");
                        }else{
                            echo $this->translate("Waiting for approval");
                        }

                        ?>
                    </th>
                    <th>
                        <?php
                        $slugName = $pendingApproval->getCompany()->getSlugName();
                        $url = "/admin/company/";
                        //determing type

                        if($pendingApproval->getType() === "profile") {
                            $url .= "approval-profile/" . $slugName;
                        }elseif($pendingApproval->getType() === "vacancy"){
                            $url .= "approval-vacancy/" . $slugName;
                        }elseif($pendingApproval->getType() == "banner"){
                            $url .= "approval-banner/" . $slugName;
                        }
                        ?>

                        <button type="button" class="btn btn-danger btn-xs" onclick="location.href='<?= $url; ?>';">
                            <?= $this->translate('View request') ?>
                        </button>
                    </th>
                </tr>
                <?php endforeach; ?>
            </tbody>
            <tfoot>
            <tr>
                <th><?= $this->translate('Company name') ?></th>
                <th><?= $this->translate('Approval type') ?></th>
                <th><?= $this->translate('Approval status') ?></th>
                <th><?= $this->translate('Actions') ?></th>
            </tr>
            </tfoot>
        </table>
    </div>
</div>
