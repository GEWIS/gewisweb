<?php

use Zend\Form\Form;

/** @var Form $form */
?>
<style>
    label { cursor: pointer;}
    label input[type=checkbox] { margin-right: 1.5rem; }

    .label-required:after { content: "*"; color: #d40026; }
</style>

<div class="row spacing-top--lg">
    <div class="col-md-12">
        <h2><?= $this->translate('Date and time') ?></h2>
        <p><?= $this->translate('Enter the begin and end date of the activity. Optionally, enter the ultimate date a participant can subscribe.') ?></p>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-6">
                <?php
                $beginTime = $form->get('beginTime')
                    ->setAttribute('class', 'form-control')
                    ->setAttribute('id', 'begin-time');
                ?>
                <div class="form-group <?= hasError($beginTime) ?>">
                    <label for="<?= $beginTime->getAttribute('id') ?>" class="control-label label-required">
                        <?= $this->translate('Begin date') ?>
                    </label>
                    <?= $this->formInput($beginTime) ?>
                    <?= $this->formElementErrors($beginTime) ?>
                </div>
            </div>
            <div class="col-md-6 spacing-top-sm--sm">
                <?php
                $endTime = $form->get('endTime')
                    ->setAttribute('class', 'form-control')
                    ->setAttribute('id', 'end-time');
                ?>
                <div class="form-group <?= hasError($endTime) ?>">
                    <label for="<?= $endTime->getAttribute('id') ?>" class="control-label label-required">
                        <?= $this->translate('End date') ?>
                    </label>
                    <?= $this->formInput($endTime) ?>
                    <?= $this->formElementErrors($endTime) ?>
                </div>
            </div>
        </div>
        <div class="row spacing-top--md">
            <?php
            $subscriptionDeadline = $form->get('subscriptionDeadline')
                ->setAttribute('class', 'form-control')
                ->setAttribute('id', 'deadline-date');
            ?>
            <div class="col-md-6">
                <div class="form-group <?= hasError($subscriptionDeadline) ?>">
                    <label for="<?= $subscriptionDeadline->getAttribute('id') ?>" class="control-label">
                        <?= $this->translate('Subscription deadline') ?>
                    </label>
                    <?= $this->formInput($subscriptionDeadline) ?>
                    <?= $this->formElementErrors($subscriptionDeadline) ?>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row spacing-top--lg">
    <div class="col-md-12">
        <h2><?= $this->translate('Translations') ?></h2>
        <p><?= $this->translate('Choose which translations you want to fill-in. At least one translation needs to be filled in.') ?></p>
    </div>
    <div class="col-md-6">
        <?php
        /** @var \Zend\Form\Element\Checkbox $dutchElement */
        $dutchElement = $form->get('language_dutch');

        $dutchElement
            ->setChecked(isset($languages) ? $languages['nl'] : false)
            ->setAttribute('onchange', 'Activity.updateForm()')
            ->setAttribute('id', 'dutch-check')
            ->setAttribute('class', '');

        ?>
        <div class="form-group <?= hasError($dutchElement) ?>">
            <label for="<?= $dutchElement->getAttribute('id') ?>" class="control-label" title="<?= $this->translate('Enable Dutch translation') ?>">
                <?php  ?>
                <?= $this->formCheckbox($dutchElement) ?>
                <i class="flag-icon flag-icon-nl"></i>
                <?= $this->translate('Dutch') ?>
            </label>
            <?= $this->formElementErrors($dutchElement) ?>
        </div>
        <hr />
        <?php
        $name = $form->get('name')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-dutch')
            ->setAttribute('id', 'name-nl');
        ?>
        <div class="form-group <?= hasError($name) ?>">
            <label for="<?= $name->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Name') ?>
            </label>
            <?= $this->formInput($name) ?>
            <?= $this->formElementErrors($name) ?>
        </div>
        <?php
        $location = $form->get('location')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-dutch')
            ->setAttribute('id', 'location-nl');
        ?>
        <div class="form-group <?= hasError($location) ?>">
            <label for="<?= $location->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Location') ?>
            </label>
            <?= $this->formInput($location) ?>
            <?= $this->formElementErrors($location) ?>
        </div>
        <?php
        $costs = $form->get('costs')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-dutch')
            ->setAttribute('id', 'cost-nl');
        ?>
        <div class="form-group <?= hasError($costs) ?>">
            <label for="<?= $costs->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Costs') ?>
            </label>
            <?= $this->formInput($costs) ?>
            <?= $this->formElementErrors($costs) ?>
        </div>
        <?php
        $description = $form->get('description')
            ->setAttribute('class', 'form-control form-control-dutch markdown-editor')
            ->setAttribute('style', 'width:100%; height:10em; resize:none')
            ->setAttribute('data-provide', 'markdown')
            ->setAttribute('id', 'description-nl');
        ?>
        <div class="form-group <?= hasError($description) ?>">
            <label for="<?= $description->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Description') ?>
            </label>
            <?= $this->formRow($description) ?>
            <?= $this->formElementErrors($description) ?>
        </div>
    </div>
    <div class="col-md-6">
        <?php
        /** @var \Zend\Form\Element\Checkbox $englishElement */
        $englishElement = $form->get('language_english');

        $englishElement
            ->setChecked(isset($languages) ? $languages['en'] : false)
            ->setAttribute('onchange', 'Activity.updateForm()')
            ->setAttribute('id', 'english-check')
            ->setAttribute('class', '');
        ?>
        <div class="form-group <?= hasError($englishElement) ?>">
            <label for="<?= $englishElement->getAttribute('id') ?>" class="control-label" title="<?= $this->translate('Enable English translation') ?>">
                <?= $this->formCheckbox($englishElement) ?>
                <i class="flag-icon flag-icon-en"></i>
                <?= $this->translate('English') ?>
            </label>
            <?= $this->formElementErrors($englishElement) ?>
        </div>
        <hr />
        <?php
        $nameEn = $form->get('nameEn')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-english')
            ->setAttribute('id', 'name-en');
        ?>
        <div class="form-group <?= hasError($nameEn) ?>">
            <label for="<?= $nameEn->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Name') ?>
            </label>
            <?= $this->formInput($nameEn) ?>
            <?= $this->formElementErrors($nameEn) ?>
        </div>
        <?php
        $locationEn = $form->get('locationEn')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-english')
            ->setAttribute('id', 'location-en');
        ?>
        <div class="form-group <?= hasError($locationEn) ?>">
            <label for="<?= $locationEn->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Location') ?>
            </label>
            <?= $this->formInput($locationEn) ?>
            <?= $this->formElementErrors($locationEn) ?>
        </div>
        <?php
        $costsEn = $form->get('costsEn')
            ->setAttribute('disabled', 'disabled')
            ->setAttribute('class', 'form-control form-control-english')
            ->setAttribute('id', 'cost-en');
        ?>
        <div class="form-group <?= hasError($costsEn) ?>">
            <label for="<?= $costsEn->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Costs') ?>
            </label>
            <?= $this->formInput($costsEn) ?>
            <?= $this->formElementErrors($costsEn) ?>
        </div>
        <?php
        $descriptionEn = $form->get('descriptionEn')
            ->setAttribute('class', 'form-control form-control-english markdown-editor')
            ->setAttribute('style', 'width:100%; height:10em; resize:none')
            ->setAttribute('data-provide', 'markdown')
            ->setAttribute('id', 'description-en');
        ?>
        <div class="form-group <?= hasError($descriptionEn) ?>">
            <label for="<?= $descriptionEn->getAttribute('id') ?>" class="control-label label-required">
                <?= $this->translate('Description') ?>
            </label>
            <?= $this->formRow($descriptionEn) ?>
            <?= $this->formElementErrors($descriptionEn) ?>
        </div>
    </div>
</div>
<div class="row spacing-top--lg">
    <div class="col-md-12">
        <h2><?= $this->translate('Options') ?></h2>
        <p><?= $this->translate('Choose which options are applicable to the activity.') ?></p>
        <?php
        $canSignUp = $form->get('canSignUp')
            ->setAttribute('id', 'can-sign-up');
        ?>
        <div class="form-group <?= hasError($canSignUp) ?>">
            <label for="<?= $canSignUp->getAttribute('id') ?>">
                <?= $this->formCheckbox($canSignUp) ?>
                <?= $this->translate('Enable subscriptions') ?>
                <span data-toggle="tooltip" data-placement="right" title="<?= $this->translate('Select this if people need to subscribe to this activity.') ?>" class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                <?= $this->formElementErrors($canSignUp) ?>
            </label>
        </div>
        <?php
        $onlyGEWIS = $form->get('onlyGEWIS')
            ->setAttribute('onchange', 'Activity.toggleExternal()')
            ->setAttribute('id', 'only-gewis');
        ?>
        <div class="form-group <?= hasError($onlyGEWIS) ?>">
            <label for="<?= $onlyGEWIS->getAttribute('id') ?>">
                <?= $this->formCheckbox($onlyGEWIS) ?>
                <?= $this->translate('Allow external participants') ?>
                <span data-toggle="tooltip" data-placement="right" title="<?= $this->translate('Select this to allow people without a GEWIS account to subscribe.') ?>" class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                <?= $this->formElementErrors($onlyGEWIS) ?>
            </label>
        </div>
        <?php
        $displaySubscribedNumber = $form->get('displaySubscribedNumber')
            ->setAttribute('id', 'display-subscriber-number');
        ?>
        <div class="form-group <?= hasError($displaySubscribedNumber) ?>">
            <label for="<?= $displaySubscribedNumber->getAttribute('id') ?>">
                <?= $this->formCheckbox($displaySubscribedNumber) ?>
                <?= $this->translate('Display number of subscribed members') ?>
                <span data-toggle="tooltip" data-placement="right" title="<?= $this->translate('Select this to display the number of subscribed GEWIS members to external visitors.') ?>" class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                <?= $this->formElementErrors($displaySubscribedNumber) ?>
            </label>
        </div>
        <?php
        $isFood = $form->get('isFood')
            ->setAttribute('id', 'is-food');
        ?>
        <div class="form-group <?= hasError($isFood) ?>">
            <label for="<?= $isFood->getAttribute('id') ?>">
                <?= $this->formCheckbox($isFood) ?>
                <?= $this->translate('This is a food subscription list') ?>
                <span data-toggle="tooltip" data-placement="right" title="<?= $this->translate('Select this if the activity is a food subscription list, it then won\'t be displayed on the information screens.') ?>" class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                <?= $this->formElementErrors($isFood) ?>
            </label>
        </div>
        <?php
        $isMyFuture = $form->get('isMyFuture')
            ->setAttribute('id', 'is-my-future');
        ?>
        <div class="form-group <?= hasError($isMyFuture) ?>">
            <label for="<?= $isMyFuture->getAttribute('id') ?>">
                <?= $this->formCheckbox($isMyFuture) ?>
                <?= $this->translate('This is a career related activity') ?>
                <span data-toggle="tooltip" data-placement="right" title="<?= $this->translate('If this is checked the My Future logo will be displayed on the activity page and the activity will be included on the career activities page.') ?>" class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                <?= $this->formElementErrors($isMyFuture) ?>
            </label>
        </div>
    </div>
</div>
<script>
$('[name="beginTime"]').datetimepicker();
$('[name="endTime"]').datetimepicker();
$('[name="subscriptionDeadline"]').datetimepicker();
$('.markdown-editor').each(function() {
    $(this).markdown();
});
</script>
